# Using R Code to Generate Health Service Delivery Process Maps with ABC/M Data


Analytics for Advancing the Financial Sustainability of the HIV/AIDS Response (AFS)
Version 0.1: January 6, 2025

The Analytics for Advancing the Financial Sustainability of the HIV/AIDS Response (AFS) contract is funded by the United States Agency for International Development (USAID) under Contract No. 7200AA23C00043, March 2023-March 2027. This contract is made possible by the generous support of the American people through support from USAID and the United States President’s Emergency Plan for AIDS Relief (PEPFAR). The contents were prepared by staff of the AFS contract and do not necessarily reflect the views of USAID or the United States Government.

## Background
Activity-Based Costing and Management (ABC/M) is an initiative to estimate cost and resource use in delivery of health interventions or services. Using ABC/M data, process maps are developed to illustrate the steps required to complete a health intervention or service as well as the order, location, and duration of the steps. 

Initial norms-based process maps are developed using existing guidelines related to the delivery of health interventions or services. The normative process is based on standard operating procedures (SOPs) that describe how an intervention should be delivered, in particular: (a) when and where services are provided, (b) what activities are performed in each step of the process, and (c) the expected duration of each step. Key informant interviews (KIIs) with national experts may also be conducted to comment on the SOPs or, if no SOPs exist, describe how the intervention or service should be delivered. The SOPs and KIIs should indicate whether norms vary by site level or location. For example, KIIs may note that a client receiving antiretroviral therapy (ART) for HIV at a hospital should receive a viral load test during their consultation whereas a client receiving ART at a clinic may not be expected to receive a viral load test. 

Process maps can also be developed with the observational data collected as part of an ABC/M study. These process maps also illustrate the steps involved in a health intervention, including the observed order, location, and duration of the steps. The R code below will generate standardized process maps for a given intervention for each individual client observed and aggregate map for each observed site. The site-level process maps show the norms-based process and the observed averages of the clients in the data set who received that intervention at the site. For example, if data collectors gathered data on 10 clients receiving ART at a clinic, then a process map illustrating the norms-based expected process and the averages of the client data for the clinic location will be generated at the top of the page with an individual process map for each of the 10 clients in the data set (which does not include the norm-based steps) displayed underneath. The generation of process maps can be repeated if there is data from multiple sites.  

Instructions for generating process maps using R are provided in the following pages (R code and sample files are available at: https://github.com/AvenirHealth-org/ProcessMaps/). 

## FILES AVAILABLE ON GITHUB
The following sample files are available in the GitHub repository for process maps (file names in bold with a description of the file is listed after the name): 

o	**ABCM Process Map Code.R** - Code to create process maps

o	**ABCM Process Map Legends Code.R** - Code to create legends

o	**AFS_Instructions to generate process maps 2025.01.06.pdf** - Instructions with all steps necessary to create process maps

o	**ART New Anonymous Facility Multi Row 12232024 Branded.jpg** - Branded example of outputs, generated by the AFS project

o	**Anonymized Example Data.csv** - File containing client information

o	**HIV Testing Anonymous Facility NormPatient Row 12232024 Branded.jpg** - Branded example of outputs, generated by the AFS project

o	**Normative Process Map Data.csv** - File containing the normative process for each intervention

o	**Legend Normative.png**- Legend created by “ABCM Process Map Legends Code.R” that is used in “ABCM Process Map Code.R”

o	**Legend Patient Normative Combo.png** - Legend created by “ABCM Process Map Legends Code.R” that is used in “ABCM Process Map Code.R”

o	**README.md** - README file shown on the GitHub main page for process maps

